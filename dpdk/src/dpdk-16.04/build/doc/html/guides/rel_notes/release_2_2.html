

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. DPDK Release 2.2 &mdash; Data Plane Development Kit 16.04.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Data Plane Development Kit 16.04.0 documentation" href="../index.html"/>
        <link rel="up" title="Release Notes" href="index.html"/>
        <link rel="next" title="4. DPDK Release 2.1" href="release_2_1.html"/>
        <link rel="prev" title="2. DPDK Release 16.04" href="release_16_04.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Data Plane Development Kit
          

          
            
            <img src="../_static/DPDK_logo_vertical_rev_small.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                16.04.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../linux_gsg/index.html">Getting Started Guide for Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freebsd_gsg/index.html">Getting Started Guide for FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xen/index.html">Xen Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prog_guide/index.html">Programmer&#8217;s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nics/index.html">Network Interface Controller Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cryptodevs/index.html">Crypto Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sample_app_ug/index.html">Sample Applications User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testpmd_app_ug/index.html">Testpmd Application User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Release Notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="rel_description.html">1. Description of Release</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_16_04.html">2. DPDK Release 16.04</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. DPDK Release 2.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#new-features">3.1. New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resolved-issues">3.2. Resolved Issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#eal">3.2.1. EAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#drivers">3.2.2. Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#libraries">3.2.3. Libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">3.2.4. Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other">3.2.5. Other</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#known-issues">3.3. Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-changes">3.4. API Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#abi-changes">3.5. ABI Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shared-library-versions">3.6. Shared Library Versions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release_2_1.html">4. DPDK Release 2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_2_0.html">5. DPDK Release 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_1_8.html">6. DPDK Release 1.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="supported_os.html">7. Supported Operating Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="known_issues.html">8. Known Issues and Limitations in Legacy Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecation.html">9. ABI and API Deprecation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributor&#8217;s Guidelines</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Data Plane Development Kit</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Release Notes</a> &raquo;</li>
      
    <li>3. DPDK Release 2.2</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/rel_notes/release_2_2.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dpdk-release-2-2">
<h1>3. DPDK Release 2.2</h1>
<div class="section" id="new-features">
<h2>3.1. New Features</h2>
<ul>
<li><p class="first"><strong>Introduce ARMv7 and ARMv8 architectures.</strong></p>
<ul class="simple">
<li>It is now possible to build DPDK for the ARMv7 and ARMv8 platforms.</li>
<li>ARMv7 can be tested with virtual PMD drivers.</li>
<li>ARMv8 can be tested with virtual and physical PMD drivers.</li>
</ul>
</li>
<li><p class="first"><strong>Enabled freeing of ring.</strong></p>
<p>A new function <code class="docutils literal"><span class="pre">rte_ring_free()</span></code> has been added to allow the user to free
a ring if it was created with <code class="docutils literal"><span class="pre">rte_ring_create()</span></code>.</p>
</li>
<li><p class="first"><strong>Added keepalive support to EAL and example application.</strong></p>
</li>
<li><p class="first"><strong>Added experimental cryptodev API</strong></p>
<p>The cryptographic processing of packets is provided as a preview
with two drivers for:</p>
<ul class="simple">
<li>Intel QuickAssist devices</li>
<li>Intel AES-NI multi-buffer library</li>
</ul>
<p>Due to its experimental state, the API may change without prior notice.</p>
</li>
<li><p class="first"><strong>Added ethdev APIs for additional IEEE1588 support.</strong></p>
<p>Added functions to read, write and adjust system time in the NIC.
Added client slave sample application to demonstrate the IEEE1588
functionality.</p>
</li>
<li><p class="first"><strong>Extended Statistics.</strong></p>
<p>Defined an extended statistics naming scheme to store metadata in the name
string of each statistic. Refer to the Extended Statistics section of the
Programmers Guide for more details.</p>
<p>Implemented the extended statistics API for the following PMDs:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">igb</span></code></li>
<li><code class="docutils literal"><span class="pre">igbvf</span></code></li>
<li><code class="docutils literal"><span class="pre">i40e</span></code></li>
<li><code class="docutils literal"><span class="pre">i40evf</span></code></li>
<li><code class="docutils literal"><span class="pre">fm10k</span></code></li>
<li><code class="docutils literal"><span class="pre">virtio</span></code></li>
</ul>
</li>
<li><p class="first"><strong>Added API in ethdev to retrieve RX/TX queue information.</strong></p>
<ul class="simple">
<li>Added the ability for the upper layer to query RX/TX queue information.</li>
<li>Added new fields in <code class="docutils literal"><span class="pre">rte_eth_dev_info</span></code> to represent information about
RX/TX descriptors min/max/align numbers, per queue, for the device.</li>
</ul>
</li>
<li><p class="first"><strong>Added RSS dynamic configuration to bonding.</strong></p>
</li>
<li><p class="first"><strong>Updated the e1000 base driver.</strong></p>
<p>The e1000 base driver was updated with several features including the
following:</p>
<ul class="simple">
<li>Added new i218 devices</li>
<li>Allowed both ULP and EEE in Sx state</li>
<li>Initialized 88E1543 (Marvell 1543) PHY</li>
<li>Added flags to set EEE advertisement modes</li>
<li>Supported inverted format ETrackId</li>
<li>Added bit to disable packetbuffer read</li>
<li>Added defaults for i210 RX/TX PBSIZE</li>
<li>Check more errors for ESB2 init and reset</li>
<li>Check more NVM read errors</li>
<li>Return code after setting receive address register</li>
<li>Removed all NAHUM6LP_HW tags</li>
</ul>
</li>
<li><p class="first"><strong>Added e1000 RX interrupt support.</strong></p>
</li>
<li><p class="first"><strong>Added igb TSO support for both PF and VF.</strong></p>
</li>
<li><p class="first"><strong>Added RSS enhancements to Intel x550 NIC.</strong></p>
<ul class="simple">
<li>Added support for 512 entry RSS redirection table.</li>
<li>Added support for per VF RSS redirection table.</li>
</ul>
</li>
<li><p class="first"><strong>Added Flow director enhancements on Intel x550 NIC.</strong></p>
<ul class="simple">
<li>Added 2 new flow director modes on x550.
One is MAC VLAN mode, the other is tunnel mode.</li>
</ul>
</li>
<li><p class="first"><strong>Updated the i40e base driver.</strong></p>
<p>The i40e base driver was updated with several changes including the
following:</p>
<ul class="simple">
<li>Added promiscuous on VLAN support</li>
<li>Added a workaround to drop all flow control frames</li>
<li>Added VF capabilities to virtual channel interface</li>
<li>Added TX Scheduling related AQ commands</li>
<li>Added additional PCTYPES supported for FortPark RSS</li>
<li>Added parsing for CEE DCBX TLVs</li>
<li>Added FortPark specific registers</li>
<li>Added AQ functions to handle RSS Key and LUT programming</li>
<li>Increased PF reset max loop limit</li>
</ul>
</li>
<li><p class="first"><strong>Added i40e vector RX/TX.</strong></p>
</li>
<li><p class="first"><strong>Added i40e RX interrupt support.</strong></p>
</li>
<li><p class="first"><strong>Added i40e flow control support.</strong></p>
</li>
<li><p class="first"><strong>Added DCB support to i40e PF driver.</strong></p>
</li>
<li><p class="first"><strong>Added RSS/FD input set granularity on Intel X710/XL710.</strong></p>
</li>
<li><p class="first"><strong>Added different GRE key length for input set on Intel X710/XL710.</strong></p>
</li>
<li><p class="first"><strong>Added flow director support in i40e VF.</strong></p>
</li>
<li><p class="first"><strong>Added i40e support of early X722 series.</strong></p>
<p>Added early X722 support, for evaluation only, as the hardware is alpha.</p>
</li>
<li><p class="first"><strong>Added fm10k vector RX/TX.</strong></p>
</li>
<li><p class="first"><strong>Added fm10k TSO support for both PF and VF.</strong></p>
</li>
<li><p class="first"><strong>Added fm10k VMDQ support.</strong></p>
</li>
<li><p class="first"><strong>New NIC Boulder Rapid support.</strong></p>
<p>Added support for the Boulder Rapid variant of Intel&#8217;s fm10k NIC family.</p>
</li>
<li><p class="first"><strong>Enhanced support for the Chelsio CXGBE driver.</strong></p>
<ul class="simple">
<li>Added support for Jumbo Frames.</li>
<li>Optimized forwarding performance for Chelsio T5 40GbE cards.</li>
</ul>
</li>
<li><p class="first"><strong>Improved enic TX packet rate.</strong></p>
<p>Reduced frequency of TX tail pointer updates to the NIC.</p>
</li>
<li><p class="first"><strong>Added support for link status interrupts in mlx4.</strong></p>
</li>
<li><p class="first"><strong>Added partial support (TX only) for secondary processes in mlx4.</strong></p>
</li>
<li><p class="first"><strong>Added support for Mellanox ConnectX-4 adapters (mlx5).</strong></p>
<p>The mlx5 poll-mode driver implements support for Mellanox ConnectX-4 EN
and Mellanox ConnectX-4 Lx EN families of 10/25/40/50/100 Gb/s adapters.</p>
<p>Like mlx4, this PMD is only available for Linux and is disabled by default
due to external dependencies (libibverbs and libmlx5).</p>
</li>
<li><p class="first"><strong>Added driver for Netronome nfp-6xxx card.</strong></p>
<p>Support for using Netronome nfp-6xxx with PCI VFs.</p>
</li>
<li><p class="first"><strong>Added virtual szedata2 driver for COMBO cards.</strong></p>
<p>Added virtual PMD for COMBO-100G and COMBO-80G cards.
PMD is disabled in default configuration.</p>
</li>
<li><p class="first"><strong>Enhanced support for virtio driver.</strong></p>
<ul class="simple">
<li>Virtio ring layout optimization (fixed avail ring)</li>
<li>Vector RX</li>
<li>Simple TX</li>
</ul>
</li>
<li><p class="first"><strong>Added vhost-user multiple queue support.</strong></p>
</li>
<li><p class="first"><strong>Added port hotplug support to vmxnet3.</strong></p>
</li>
<li><p class="first"><strong>Added port hotplug support to xenvirt.</strong></p>
</li>
<li><p class="first"><strong>Added ethtool shim and sample application.</strong></p>
</li>
<li><p class="first"><strong>Added experimental performance thread example application.</strong></p>
<p>The new sample application demonstrates L3 forwarding with different threading
models: pthreads, cgroups, or lightweight threads. The example includes
a simple cooperative scheduler.</p>
<p>Due to its experimental state this application may change without notice.
The application is supported only for Linux x86_64.</p>
</li>
<li><p class="first"><strong>Enhancements to the IP pipeline application.</strong></p>
<p>The following features have been added to the <code class="docutils literal"><span class="pre">ip_pipeline</span></code>
application;</p>
<ul class="simple">
<li>Added Multiple Producers/Multiple Consumers (MPSC)
and fragmentation/reassembly support to software rings.</li>
<li>Added a dynamic pipeline reconfiguration feature that
allows binding a pipeline to other threads at runtime
using CLI commands.</li>
<li>Added enable/disable of <code class="docutils literal"><span class="pre">promisc</span></code> mode from <code class="docutils literal"><span class="pre">ip_pipeline</span></code>
configuration file.</li>
<li>Added check on RX queues and TX queues of each link
whether they are used correctly in the <code class="docutils literal"><span class="pre">ip_pipeline</span></code>
configuration file.</li>
<li>Added flow id parameters to the flow-classification
table entries.</li>
<li>Added more functions to the routing pipeline:
ARP table enable/disable, Q-in-Q and MPLS encapsulation,
add color (traffic-class for QoS) to the MPLS tag.</li>
<li>Added flow-actions pipeline for traffic metering/marking
(for e.g. Two Rate Three Color Marker (trTCM)), policer etc.</li>
<li>Modified the pass-through pipeline&#8217;s actions-handler to
implement a generic approach to extract fields from the
packet&#8217;s header and copy them to packet metadata.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="resolved-issues">
<h2>3.2. Resolved Issues</h2>
<div class="section" id="eal">
<h3>3.2.1. EAL</h3>
<ul>
<li><p class="first"><strong>eal/linux: Fixed epoll timeout.</strong></p>
<p>Fixed issue where the <code class="docutils literal"><span class="pre">rte_epoll_wait()</span></code> function didn&#8217;t return when the
underlying call to <code class="docutils literal"><span class="pre">epoll_wait()</span></code> timed out.</p>
</li>
</ul>
</div>
<div class="section" id="drivers">
<h3>3.2.2. Drivers</h3>
<ul>
<li><p class="first"><strong>e1000/base: Synchronize PHY interface on non-ME systems.</strong></p>
<p>On power up, the MAC - PHY interface needs to be set to PCIe, even if the
cable is disconnected. In ME systems, the ME handles this on exit from the
Sx (Sticky mode) state. In non-ME, the driver handles it. Added a check for
non-ME system to the driver code that handles it.</p>
</li>
<li><p class="first"><strong>e1000/base: Increased timeout of reset check.</strong></p>
<p>Previously, in <code class="docutils literal"><span class="pre">check_reset_block</span></code> RSPCIPHY was polled for 100 ms before
determining that the ME veto was set. This was not enough and it was
increased to 300 ms.</p>
</li>
<li><p class="first"><strong>e1000/base: Disabled IPv6 extension header parsing on 82575.</strong></p>
<p>Disabled IPv6 options as per hardware limitation.</p>
</li>
<li><p class="first"><strong>e1000/base: Prevent ULP flow if cable connected.</strong></p>
<p>Enabling ULP on link down when the cable is connected caused an infinite
loop of link up/down indications in the NDIS driver.
The driver now enables ULP only when the cable is disconnected.</p>
</li>
<li><p class="first"><strong>e1000/base: Support different EEARBC for i210.</strong></p>
<p>EEARBC has changed on i210. It means EEARBC has a different address on
i210 than on other NICs. So, add a new entity named EEARBC_I210 to the
register list and make sure the right one is being used on i210.</p>
</li>
<li><p class="first"><strong>e1000/base: Fix K1 configuration.</strong></p>
<p>Added fix for the following updates to the K1 configurations:
TX idle period for entering K1 should be 128 ns.
Minimum TX idle period in K1 should be 256 ns.</p>
</li>
<li><p class="first"><strong>e1000/base: Fix link detect flow.</strong></p>
<p>Fix link detect flow in case where auto-negotiate is not enabled, by calling
<code class="docutils literal"><span class="pre">e1000_setup_copper_link_generic</span></code> instead of <code class="docutils literal"><span class="pre">e1000_phy_setup_autoneg</span></code>.</p>
</li>
<li><p class="first"><strong>e1000/base: Fix link check for i354 M88E1112 PHY.</strong></p>
<p>The <code class="docutils literal"><span class="pre">e1000_check_for_link_media_swap()</span></code> function is supposed to check PHY
page 0 for copper and PHY page 1 for &#8220;other&#8221; (fiber) links. The driver
switched back from page 1 to page 0 too soon, before
<code class="docutils literal"><span class="pre">e1000_check_for_link_82575()</span></code> is executed and was never finding the link
on the fiber (other).</p>
<p>If the link is copper, as the M88E1112 page address is set to 1, it should be
set back to 0 before checking this link.</p>
</li>
<li><p class="first"><strong>e1000/base: Fix beacon duration for i217.</strong></p>
<p>Fix for I217 Packet Loss issue - The Management Engine sets the FEXTNVM4
Beacon Duration incorrectly. This fix ensures that the correct value will
always be set. Correct value for this field is 8 usec.</p>
</li>
<li><p class="first"><strong>e1000/base: Fix TIPG for non 10 half duplex mode.</strong></p>
<p>TIPG value is increased when setting speed to 10 half duplex to prevent
packet loss. However, it was never decreased again when speed
changed. This caused performance issues in the NDIS driver.
Fix this to restore TIPG to default value on non 10 half duplex.</p>
</li>
<li><p class="first"><strong>e1000/base: Fix reset of DH89XXCC SGMII.</strong></p>
<p>For DH89XXCC_SGMII, a write flush leaves registers of this device trashed
(0xFFFFFFFF). Add check for this device.</p>
<p>Also, after both Port SW Reset and Device Reset case, the platform should
wait at least 3ms before reading any registers. Remove this condition since
waiting is conditionally executed only for Device Reset.</p>
</li>
<li><p class="first"><strong>e1000/base: Fix redundant PHY power down for i210.</strong></p>
<p>Bit 11 of PHYREG 0 is used to power down PHY. The use of PHYREG 16 is
no longer necessary.</p>
</li>
<li><p class="first"><strong>e1000/base: fix jumbo frame CRC failures.</strong></p>
<p>Change the value of register 776.20[11:2] for jumbo mode from 0x1A to 0x1F.
This is to enlarge the gap between read and write pointers in the TX FIFO.</p>
</li>
<li><p class="first"><strong>e1000/base: Fix link flap on 82579.</strong></p>
<p>Several customers have reported a link flap issue on 82579. The symptoms
are random and intermittent link losses when 82579 is connected to specific
switches. the Issue was root caused as an inter-operability problem between
the NIC and at least some Broadcom PHYs in the Energy Efficient Ethernet
wake mechanism.</p>
<p>To fix the issue, we are disabling the Phase Locked Loop shutdown in 100M
Low Power Idle. This solution will cause an increase of power in 100M EEE
link. It may cost an additional 28mW in this specific mode.</p>
</li>
<li><p class="first"><strong>igb: Fixed IEEE1588 frame identification in I210.</strong></p>
<p>Fixed issue where the flag <code class="docutils literal"><span class="pre">PKT_RX_IEEE1588_PTP</span></code> was not being set
in the Intel I210 NIC, as the EtherType in RX descriptor is in bits 8:10 of
Packet Type and not in the default bits 0:2.</p>
</li>
<li><p class="first"><strong>igb: Fixed VF start with PF stopped.</strong></p>
<p>VF needs the PF interrupt support initialized even if not started.</p>
</li>
<li><p class="first"><strong>igb: Fixed VF MAC address when using with DPDK PF.</strong></p>
<p>Assign a random MAC address in VF when not assigned by PF.</p>
</li>
<li><p class="first"><strong>igb: Removed CRC bytes from byte counter statistics.</strong></p>
</li>
<li><p class="first"><strong>ixgbe: Fixed issue with X550 DCB.</strong></p>
<p>Fixed a DCB issue with x550 where for 8 TCs (Traffic Classes), if a packet
with user priority 6 or 7 was injected to the NIC, then the NIC would only
put 3 packets into the queue. There was also a similar issue for 4 TCs.</p>
</li>
<li><p class="first"><strong>ixgbe: Removed burst size restriction of vector RX.</strong></p>
<p>Fixed issue where a burst size less than 32 didn&#8217;t receive anything.</p>
</li>
<li><p class="first"><strong>ixgbe: Fixed VF start with PF stopped.</strong></p>
<p>VF needs the PF interrupt support initialized even if not started.</p>
</li>
<li><p class="first"><strong>ixgbe: Fixed TX hang when RS distance exceeds HW limit.</strong></p>
<p>Fixed an issue where the TX queue can hang when a lot of highly fragmented
packets have to be sent. As part of that fix, <code class="docutils literal"><span class="pre">tx_rs_thresh</span></code> for ixgbe PMD
is not allowed to be greater then to 32 to comply with HW restrictions.</p>
</li>
<li><p class="first"><strong>ixgbe: Fixed rx error statistic counter.</strong></p>
<p>Fixed an issue that the rx error counter of ixgbe was not accurate. The
mac short packet discard count (mspdc) was added to the counter. Mac local
faults and mac remote faults are removed as they do not count packets but
errors, and jabber errors were removed as they are already accounted for
by the CRC error counter. Finally the XEC (l3 / l4 checksum error) counter
was removed due to errata, see commit 256ff05a9cae for details.</p>
</li>
<li><p class="first"><strong>ixgbe: Removed CRC bytes from byte counter statistics.</strong></p>
</li>
<li><p class="first"><strong>i40e: Fixed base driver allocation when not using first numa node.</strong></p>
<p>Fixed i40e issue that occurred when a DPDK application didn&#8217;t initialize
ports if memory wasn&#8217;t available on socket 0.</p>
</li>
<li><p class="first"><strong>i40e: Fixed maximum of 64 queues per port.</strong></p>
<p>Fixed an issue in i40e where it would not support more than 64 queues per
port, even though the hardware actually supports it. The real number of
queues may vary, as long as the total number of queues used in PF, VFs, VMDq
and FD does not exceeds the hardware maximum.</p>
</li>
<li><p class="first"><strong>i40e: Fixed statistics of packets.</strong></p>
<p>Added discarding packets on VSI to the stats and rectify the old statistics.</p>
</li>
<li><p class="first"><strong>i40e: Fixed issue of not freeing memzone.</strong></p>
<p>Fixed an issue of not freeing a memzone in the call to free the memory for
adminq DMA.</p>
</li>
<li><p class="first"><strong>i40e: Removed CRC bytes from byte counter statistics.</strong></p>
</li>
<li><p class="first"><strong>mlx: Fixed driver loading.</strong></p>
<p>The mlx drivers were unable to load when built as a shared library,
due to a missing symbol in the mempool library.</p>
</li>
<li><p class="first"><strong>mlx4: Performance improvements.</strong></p>
<p>Fixed bugs in TX and RX flows that improves mlx4 performance.</p>
</li>
<li><p class="first"><strong>mlx4: Fixed TX loss after initialization.</strong></p>
</li>
<li><p class="first"><strong>mlx4: Fixed scattered TX with too many segments.</strong></p>
</li>
<li><p class="first"><strong>mlx4: Fixed memory registration for indirect mbuf data.</strong></p>
</li>
<li><p class="first"><strong>vhost: Fixed Qemu shutdown.</strong></p>
<p>Fixed issue with libvirt <code class="docutils literal"><span class="pre">virsh</span> <span class="pre">destroy</span></code> not killing the VM.</p>
</li>
<li><p class="first"><strong>virtio: Fixed crash after changing link state.</strong></p>
<p>Fixed IO permission in the interrupt handler.</p>
</li>
<li><p class="first"><strong>virtio: Fixed crash when releasing queue.</strong></p>
<p>Fixed issue when releasing null control queue.</p>
</li>
</ul>
</div>
<div class="section" id="libraries">
<h3>3.2.3. Libraries</h3>
<ul>
<li><p class="first"><strong>hash: Fixed memory allocation of Cuckoo Hash key table.</strong></p>
<p>Fixed issue where an incorrect Cuckoo Hash key table size could be
calculated limiting the size to 4GB.</p>
</li>
<li><p class="first"><strong>hash: Fixed incorrect lookup if key is all zero.</strong></p>
<p>Fixed issue in hash library that occurred if an all zero
key was not added to the table and the key was looked up,
resulting in an incorrect hit.</p>
</li>
<li><p class="first"><strong>hash: Fixed thread scaling by reducing contention.</strong></p>
<p>Fixed issue in the hash library where, using multiple cores with
hardware transactional memory support, thread scaling did not work,
due to the global ring that is shared by all cores.</p>
</li>
</ul>
</div>
<div class="section" id="examples">
<h3>3.2.4. Examples</h3>
<ul class="simple">
<li><strong>l3fwd: Fixed crash with IPv6.</strong></li>
<li><strong>vhost_xen: Fixed compile error.</strong></li>
</ul>
</div>
<div class="section" id="other">
<h3>3.2.5. Other</h3>
<ul class="simple">
<li>This release drops compatibility with Linux kernel 2.6.33. The minimum
kernel requirement is now 2.6.34.</li>
</ul>
</div>
</div>
<div class="section" id="known-issues">
<h2>3.3. Known Issues</h2>
<ul class="simple">
<li>Some drivers do not fill in the packet type when receiving.
As the l3fwd example application requires this info, the i40e vector
driver must be disabled to benefit of the packet type with i40e.</li>
<li>Some (possibly all) VF drivers (e.g. i40evf) do not handle any PF reset
events/requests in the VF driver. This means that the VF driver may not work
after a PF reset in the host side. The workaround is to avoid triggering any
PF reset events/requests on the host side.</li>
<li>100G link report support is missing.</li>
<li><strong>Mellanox PMDs (mlx4 &amp; mlx5):</strong><ul>
<li>PMDs do not support CONFIG_RTE_BUILD_COMBINE_LIBS and
CONFIG_RTE_BUILD_SHARED_LIB simultaneously.</li>
<li>There is performance degradation for small packets when the PMD is
compiled with <code class="docutils literal"><span class="pre">SGE_WR_N</span> <span class="pre">=</span> <span class="pre">4</span></code> compared to the performance when <code class="docutils literal"><span class="pre">SGE_WR_N</span>
<span class="pre">=</span> <span class="pre">1</span></code>. If scattered packets are not used it is recommended to compile the
PMD with <code class="docutils literal"><span class="pre">SGE_WR_N</span> <span class="pre">=</span> <span class="pre">1</span></code>.</li>
<li>When a Multicast or Broadcast packet is sent to the SR-IOV mlx4 VF,
it is returned back to the port.</li>
<li>PMDs report &#8220;bad&#8221; L4 checksum when IP packet is received.</li>
<li>mlx5 PMD reports &#8220;bad&#8221; checksum although the packet has &#8220;good&#8221; checksum.
Will be fixed in upcoming MLNX_OFED release.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="api-changes">
<h2>3.4. API Changes</h2>
<ul class="simple">
<li>The deprecated flow director API is removed.
It was replaced by <code class="docutils literal"><span class="pre">rte_eth_dev_filter_ctrl()</span></code>.</li>
<li>The <code class="docutils literal"><span class="pre">dcb_queue</span></code> is renamed to <code class="docutils literal"><span class="pre">dcb_tc</span></code> in following dcb configuration
structures: <code class="docutils literal"><span class="pre">rte_eth_dcb_rx_conf</span></code>, <code class="docutils literal"><span class="pre">rte_eth_dcb_tx_conf</span></code>,
<code class="docutils literal"><span class="pre">rte_eth_vmdq_dcb_conf</span></code>, <code class="docutils literal"><span class="pre">rte_eth_vmdq_dcb_tx_conf</span></code>.</li>
<li>The <code class="docutils literal"><span class="pre">rte_eth_rx_queue_count()</span></code> function now returns &#8220;int&#8221; instead of
&#8220;uint32_t&#8221; to allow the use of negative values as error codes on return.</li>
<li>The function <code class="docutils literal"><span class="pre">rte_eal_pci_close_one()</span></code> is removed.
It was replaced by <code class="docutils literal"><span class="pre">rte_eal_pci_detach()</span></code>.</li>
<li>The deprecated ACL API <code class="docutils literal"><span class="pre">ipv4vlan</span></code> is removed.</li>
<li>The deprecated hash function <code class="docutils literal"><span class="pre">rte_jhash2()</span></code> is removed.
It was replaced by <code class="docutils literal"><span class="pre">rte_jhash_32b()</span></code>.</li>
<li>The deprecated KNI functions are removed:
<code class="docutils literal"><span class="pre">rte_kni_create()</span></code>, <code class="docutils literal"><span class="pre">rte_kni_get_port_id()</span></code> and <code class="docutils literal"><span class="pre">rte_kni_info_get()</span></code>.</li>
<li>The deprecated ring PMD functions are removed:
<code class="docutils literal"><span class="pre">rte_eth_ring_pair_create()</span></code> and <code class="docutils literal"><span class="pre">rte_eth_ring_pair_attach()</span></code>.</li>
<li>The devargs union field <code class="docutils literal"><span class="pre">virtual</span></code> is renamed to <code class="docutils literal"><span class="pre">virt</span></code> for C++
compatibility.</li>
</ul>
</div>
<div class="section" id="abi-changes">
<h2>3.5. ABI Changes</h2>
<ul class="simple">
<li>The EAL and ethdev structures <code class="docutils literal"><span class="pre">rte_intr_handle</span></code> and <code class="docutils literal"><span class="pre">rte_eth_conf</span></code> were
changed to support RX interrupt. This was already included in 2.1 under the
<code class="docutils literal"><span class="pre">CONFIG_RTE_NEXT_ABI</span></code> #define.</li>
<li>The ethdev flow director entries for SCTP were changed.
This was already included in 2.1 under the <code class="docutils literal"><span class="pre">CONFIG_RTE_NEXT_ABI</span></code> #define.</li>
<li>The ethdev flow director structure <code class="docutils literal"><span class="pre">rte_eth_fdir_flow_ext</span></code> structure was
changed. New fields were added to support flow director filtering in VF.</li>
<li>The size of the ethdev structure <code class="docutils literal"><span class="pre">rte_eth_hash_filter_info</span></code> is changed
by adding a new element <code class="docutils literal"><span class="pre">rte_eth_input_set_conf</span></code> in a union.</li>
<li>New fields <code class="docutils literal"><span class="pre">rx_desc_lim</span></code> and <code class="docutils literal"><span class="pre">tx_desc_lim</span></code> are added into
<code class="docutils literal"><span class="pre">rte_eth_dev_info</span></code> structure.</li>
<li>For debug builds, the functions <code class="docutils literal"><span class="pre">rte_eth_rx_burst()</span></code>, <code class="docutils literal"><span class="pre">rte_eth_tx_burst()</span></code>
<code class="docutils literal"><span class="pre">rte_eth_rx_descriptor_done()</span></code> and <code class="docutils literal"><span class="pre">rte_eth_rx_queue_count()</span></code> will
no longer be separate functions in the DPDK libraries. Instead, they will
only be present in the <code class="docutils literal"><span class="pre">rte_ethdev.h</span></code> header file.</li>
<li>The maximum number of queues per port <code class="docutils literal"><span class="pre">CONFIG_RTE_MAX_QUEUES_PER_PORT</span></code> is
increased to 1024.</li>
<li>The mbuf structure was changed to support the unified packet type.
This was already included in 2.1 under the <code class="docutils literal"><span class="pre">CONFIG_RTE_NEXT_ABI</span></code> #define.</li>
<li>The dummy malloc library is removed. The content was moved into EAL in 2.1.</li>
<li>The LPM structure is changed. The deprecated field <code class="docutils literal"><span class="pre">mem_location</span></code> is
removed.</li>
<li>librte_table LPM: A new parameter to hold the table name will be added to
the LPM table parameter structure.</li>
<li>librte_table hash: The key mask parameter is added to the hash table
parameter structure for 8-byte key and 16-byte key extendable bucket
and LRU tables.</li>
<li>librte_port: Macros to access the packet meta-data stored within the packet
buffer has been adjusted to cover the packet mbuf structure.</li>
<li>librte_cfgfile: Allow longer names and values by increasing the constants
<code class="docutils literal"><span class="pre">CFG_NAME_LEN</span></code> and <code class="docutils literal"><span class="pre">CFG_VALUE_LEN</span></code> to 64 and 256 respectively.</li>
<li>vhost: a new field enabled is added to the <code class="docutils literal"><span class="pre">vhost_virtqueue</span></code> structure.</li>
<li>vhost: a new field <code class="docutils literal"><span class="pre">virt_qp_nb</span></code> is added to <code class="docutils literal"><span class="pre">virtio_net</span></code> structure, and
the <code class="docutils literal"><span class="pre">virtqueue</span></code> field is moved to the end of virtio_net structure.</li>
<li>vhost: a new operation <code class="docutils literal"><span class="pre">vring_state_changed</span></code> is added to
<code class="docutils literal"><span class="pre">virtio_net_device_ops</span></code> structure.</li>
<li>vhost: a few spaces are reserved both at <code class="docutils literal"><span class="pre">vhost_virtqueue</span></code> and
<code class="docutils literal"><span class="pre">virtio_net</span></code> structure for future extension.</li>
</ul>
</div>
<div class="section" id="shared-library-versions">
<h2>3.6. Shared Library Versions</h2>
<p>The libraries prepended with a plus sign were incremented in this version.</p>
<div class="highlight-diff"><div class="highlight"><pre><span></span><span class="gi">+ libethdev.so.2</span>
<span class="gi">+ librte_acl.so.2</span>
<span class="gi">+ librte_cfgfile.so.2</span>
  librte_cmdline.so.1
  librte_distributor.so.1
<span class="gi">+ librte_eal.so.2</span>
<span class="gi">+ librte_hash.so.2</span>
  librte_ip_frag.so.1
  librte_ivshmem.so.1
  librte_jobstats.so.1
<span class="gi">+ librte_kni.so.2</span>
  librte_kvargs.so.1
<span class="gi">+ librte_lpm.so.2</span>
<span class="gi">+ librte_mbuf.so.2</span>
  librte_mempool.so.1
  librte_meter.so.1
<span class="gi">+ librte_pipeline.so.2</span>
  librte_pmd_bond.so.1
<span class="gi">+ librte_pmd_ring.so.2</span>
<span class="gi">+ librte_port.so.2</span>
  librte_power.so.1
  librte_reorder.so.1
  librte_ring.so.1
  librte_sched.so.1
<span class="gi">+ librte_table.so.2</span>
  librte_timer.so.1
<span class="gi">+ librte_vhost.so.2</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release_2_1.html" class="btn btn-neutral float-right" title="4. DPDK Release 2.1" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="release_16_04.html" class="btn btn-neutral" title="2. DPDK Release 16.04" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'16.04.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>