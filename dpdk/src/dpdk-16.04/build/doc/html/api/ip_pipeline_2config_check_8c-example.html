<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>DPDK: ip_pipeline/config_check.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DPDK
   &#160;<span id="projectnumber">16.04.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ip_pipeline/config_check.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/*-</span></div>
<div class="line"><span class="comment"> *   BSD LICENSE</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   Copyright(c) 2010-2015 Intel Corporation. All rights reserved.</span></div>
<div class="line"><span class="comment"> *   All rights reserved.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><span class="comment"> *   modification, are permitted provided that the following conditions</span></div>
<div class="line"><span class="comment"> *   are met:</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *     * Redistributions of source code must retain the above copyright</span></div>
<div class="line"><span class="comment"> *       notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><span class="comment"> *     * Redistributions in binary form must reproduce the above copyright</span></div>
<div class="line"><span class="comment"> *       notice, this list of conditions and the following disclaimer in</span></div>
<div class="line"><span class="comment"> *       the documentation and/or other materials provided with the</span></div>
<div class="line"><span class="comment"> *       distribution.</span></div>
<div class="line"><span class="comment"> *     * Neither the name of Intel Corporation nor the names of its</span></div>
<div class="line"><span class="comment"> *       contributors may be used to endorse or promote products derived</span></div>
<div class="line"><span class="comment"> *       from this software without specific prior written permission.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><span class="comment"> *   &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><span class="comment"> *   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><span class="comment"> *   A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><span class="comment"> *   OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><span class="comment"> *   SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><span class="comment"> *   LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><span class="comment"> *   DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><span class="comment"> *   THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><span class="comment"> *   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><span class="comment"> *   OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__ip_8h.html">rte_ip.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;app.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">check_mempools(<span class="keyword">struct</span> app_params *app)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; app-&gt;n_mempools; i++) {</div>
<div class="line">        <span class="keyword">struct </span>app_mempool_params *p = &amp;app-&gt;mempool_params[i];</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;pool_size &gt; 0),</div>
<div class="line">            <span class="stringliteral">&quot;Mempool %s size is 0\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;cache_size &gt; 0),</div>
<div class="line">            <span class="stringliteral">&quot;Mempool %s cache size is 0\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK(<a name="a0"></a><a class="code" href="rte__common_8h.html#adf96e98b8f6bb0b22e8a8d3a0ac16e7d">rte_is_power_of_2</a>(p-&gt;cache_size),</div>
<div class="line">            <span class="stringliteral">&quot;Mempool %s cache size not a power of 2\n&quot;</span>, p-&gt;name);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">check_links(<span class="keyword">struct</span> app_params *app)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Check that number of links matches the port mask */</span></div>
<div class="line">    <span class="keywordflow">if</span> (app-&gt;port_mask) {</div>
<div class="line">        uint32_t n_links_port_mask =</div>
<div class="line">            __builtin_popcountll(app-&gt;port_mask);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((app-&gt;n_links == n_links_port_mask),</div>
<div class="line">            <span class="stringliteral">&quot;Not enough links provided in the PORT_MASK\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; app-&gt;n_links; i++) {</div>
<div class="line">        <span class="keyword">struct </span>app_link_params *link = &amp;app-&gt;link_params[i];</div>
<div class="line">        uint32_t rxq_max, n_rxq, n_txq, link_id, i;</div>
<div class="line"></div>
<div class="line">        APP_PARAM_GET_ID(link, <span class="stringliteral">&quot;LINK&quot;</span>, link_id);</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Check that link RXQs are contiguous */</span></div>
<div class="line">        rxq_max = 0;</div>
<div class="line">        <span class="keywordflow">if</span> (link-&gt;arp_q &gt; rxq_max)</div>
<div class="line">            rxq_max = link-&gt;arp_q;</div>
<div class="line">        <span class="keywordflow">if</span> (link-&gt;tcp_syn_q &gt; rxq_max)</div>
<div class="line">            rxq_max = link-&gt;tcp_syn_q;</div>
<div class="line">        <span class="keywordflow">if</span> (link-&gt;ip_local_q &gt; rxq_max)</div>
<div class="line">            rxq_max = link-&gt;ip_local_q;</div>
<div class="line">        <span class="keywordflow">if</span> (link-&gt;tcp_local_q &gt; rxq_max)</div>
<div class="line">            rxq_max = link-&gt;tcp_local_q;</div>
<div class="line">        <span class="keywordflow">if</span> (link-&gt;udp_local_q &gt; rxq_max)</div>
<div class="line">            rxq_max = link-&gt;udp_local_q;</div>
<div class="line">        <span class="keywordflow">if</span> (link-&gt;sctp_local_q &gt; rxq_max)</div>
<div class="line">            rxq_max = link-&gt;sctp_local_q;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> (i = 1; i &lt;= rxq_max; i++)</div>
<div class="line">            APP_CHECK(((link-&gt;arp_q == i) ||</div>
<div class="line">                (link-&gt;tcp_syn_q == i) ||</div>
<div class="line">                (link-&gt;ip_local_q == i) ||</div>
<div class="line">                (link-&gt;tcp_local_q == i) ||</div>
<div class="line">                (link-&gt;udp_local_q == i) ||</div>
<div class="line">                (link-&gt;sctp_local_q == i)),</div>
<div class="line">                <span class="stringliteral">&quot;%s RXQs are not contiguous (A)\n&quot;</span>, link-&gt;name);</div>
<div class="line"></div>
<div class="line">        n_rxq = app_link_get_n_rxq(app, link);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_rxq), <span class="stringliteral">&quot;%s does not have any RXQ\n&quot;</span>, link-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_rxq == rxq_max + 1),</div>
<div class="line">            <span class="stringliteral">&quot;%s RXQs are not contiguous (B)\n&quot;</span>, link-&gt;name);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; n_rxq; i++) {</div>
<div class="line">            <span class="keywordtype">char</span> name[APP_PARAM_NAME_SIZE];</div>
<div class="line">            <span class="keywordtype">int</span> pos;</div>
<div class="line"></div>
<div class="line">            sprintf(name, <span class="stringliteral">&quot;RXQ%&quot;</span> PRIu32 <span class="stringliteral">&quot;.%&quot;</span> PRIu32,</div>
<div class="line">                link_id, i);</div>
<div class="line">            pos = APP_PARAM_FIND(app-&gt;hwq_in_params, name);</div>
<div class="line">            APP_CHECK((pos &gt;= 0),</div>
<div class="line">                <span class="stringliteral">&quot;%s RXQs are not contiguous (C)\n&quot;</span>, link-&gt;name);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Check that link RXQs are contiguous */</span></div>
<div class="line">        n_txq = app_link_get_n_txq(app, link);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_txq),  <span class="stringliteral">&quot;%s does not have any TXQ\n&quot;</span>, link-&gt;name);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; n_txq; i++) {</div>
<div class="line">            <span class="keywordtype">char</span> name[APP_PARAM_NAME_SIZE];</div>
<div class="line">            <span class="keywordtype">int</span> pos;</div>
<div class="line"></div>
<div class="line">            sprintf(name, <span class="stringliteral">&quot;TXQ%&quot;</span> PRIu32 <span class="stringliteral">&quot;.%&quot;</span> PRIu32,</div>
<div class="line">                link_id, i);</div>
<div class="line">            pos = APP_PARAM_FIND(app-&gt;hwq_out_params, name);</div>
<div class="line">            APP_CHECK((pos &gt;= 0),</div>
<div class="line">                <span class="stringliteral">&quot;%s TXQs are not contiguous\n&quot;</span>, link-&gt;name);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">check_rxqs(<span class="keyword">struct</span> app_params *app)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; app-&gt;n_pktq_hwq_in; i++) {</div>
<div class="line">        <span class="keyword">struct </span>app_pktq_hwq_in_params *p = &amp;app-&gt;hwq_in_params[i];</div>
<div class="line">        uint32_t n_readers = app_rxq_get_readers(app, p);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;size &gt; 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s size is 0\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((<a class="code" href="rte__common_8h.html#adf96e98b8f6bb0b22e8a8d3a0ac16e7d">rte_is_power_of_2</a>(p-&gt;size)),</div>
<div class="line">            <span class="stringliteral">&quot;%s size is not a power of 2\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;burst &gt; 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s burst size is 0\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;burst &lt;= p-&gt;size),</div>
<div class="line">            <span class="stringliteral">&quot;%s burst size is bigger than its size\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_readers != 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s has no reader\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_readers == 1),</div>
<div class="line">            <span class="stringliteral">&quot;%s has more than one reader\n&quot;</span>, p-&gt;name);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">check_txqs(<span class="keyword">struct</span> app_params *app)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; app-&gt;n_pktq_hwq_out; i++) {</div>
<div class="line">        <span class="keyword">struct </span>app_pktq_hwq_out_params *p = &amp;app-&gt;hwq_out_params[i];</div>
<div class="line">        uint32_t n_writers = app_txq_get_writers(app, p);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;size &gt; 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s size is 0\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((<a class="code" href="rte__common_8h.html#adf96e98b8f6bb0b22e8a8d3a0ac16e7d">rte_is_power_of_2</a>(p-&gt;size)),</div>
<div class="line">            <span class="stringliteral">&quot;%s size is not a power of 2\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;burst &gt; 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s burst size is 0\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;burst &lt;= p-&gt;size),</div>
<div class="line">            <span class="stringliteral">&quot;%s burst size is bigger than its size\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_writers != 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s has no writer\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_writers == 1),</div>
<div class="line">            <span class="stringliteral">&quot;%s has more than one writer\n&quot;</span>, p-&gt;name);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">check_swqs(<span class="keyword">struct</span> app_params *app)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; app-&gt;n_pktq_swq; i++) {</div>
<div class="line">        <span class="keyword">struct </span>app_pktq_swq_params *p = &amp;app-&gt;swq_params[i];</div>
<div class="line">        uint32_t n_readers = app_swq_get_readers(app, p);</div>
<div class="line">        uint32_t n_writers = app_swq_get_writers(app, p);</div>
<div class="line">        uint32_t n_flags;</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;size &gt; 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s size is 0\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((<a class="code" href="rte__common_8h.html#adf96e98b8f6bb0b22e8a8d3a0ac16e7d">rte_is_power_of_2</a>(p-&gt;size)),</div>
<div class="line">            <span class="stringliteral">&quot;%s size is not a power of 2\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;burst_read &gt; 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s read burst size is 0\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;burst_read &lt;= p-&gt;size),</div>
<div class="line">            <span class="stringliteral">&quot;%s read burst size is bigger than its size\n&quot;</span>,</div>
<div class="line">            p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;burst_write &gt; 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s write burst size is 0\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;burst_write &lt;= p-&gt;size),</div>
<div class="line">            <span class="stringliteral">&quot;%s write burst size is bigger than its size\n&quot;</span>,</div>
<div class="line">            p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_readers != 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s has no reader\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (n_readers &gt; 1)</div>
<div class="line">            APP_LOG(app, LOW, <span class="stringliteral">&quot;%s has more than one reader&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_writers != 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s has no writer\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (n_writers &gt; 1)</div>
<div class="line">            APP_LOG(app, LOW, <span class="stringliteral">&quot;%s has more than one writer&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        n_flags = p-&gt;ipv4_frag + p-&gt;ipv6_frag + p-&gt;ipv4_ras + p-&gt;ipv6_ras;</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_flags &lt; 2),</div>
<div class="line">            <span class="stringliteral">&quot;%s has more than one fragmentation or reassembly mode enabled\n&quot;</span>,</div>
<div class="line">            p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((!((n_readers &gt; 1) &amp;&amp; (n_flags == 1))),</div>
<div class="line">            <span class="stringliteral">&quot;%s has more than one reader when fragmentation or reassembly&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot; mode enabled\n&quot;</span>,</div>
<div class="line">            p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((!((n_writers &gt; 1) &amp;&amp; (n_flags == 1))),</div>
<div class="line">            <span class="stringliteral">&quot;%s has more than one writer when fragmentation or reassembly&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot; mode enabled\n&quot;</span>,</div>
<div class="line">            p-&gt;name);</div>
<div class="line"></div>
<div class="line">        n_flags = p-&gt;ipv4_ras + p-&gt;ipv6_ras;</div>
<div class="line"></div>
<div class="line">        APP_CHECK((!((p-&gt;dropless == 1) &amp;&amp; (n_flags == 1))),</div>
<div class="line">            <span class="stringliteral">&quot;%s has dropless when reassembly mode enabled\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        n_flags = p-&gt;ipv4_frag + p-&gt;ipv6_frag;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (n_flags == 1) {</div>
<div class="line">            uint16_t ip_hdr_size = (p-&gt;ipv4_frag) ? <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a name="_a1"></a><a class="code" href="structipv4__hdr.html">ipv4_hdr</a>) :</div>
<div class="line">                <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a name="_a2"></a><a class="code" href="structipv6__hdr.html">ipv6_hdr</a>);</div>
<div class="line"></div>
<div class="line">            APP_CHECK((p-&gt;mtu &gt; ip_hdr_size),</div>
<div class="line">                <span class="stringliteral">&quot;%s mtu size is smaller than ip header\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">            APP_CHECK((!((p-&gt;mtu - ip_hdr_size) % 8)),</div>
<div class="line">                <span class="stringliteral">&quot;%s mtu size is incorrect\n&quot;</span>, p-&gt;name);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">check_tms(<span class="keyword">struct</span> app_params *app)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; app-&gt;n_pktq_tm; i++) {</div>
<div class="line">        <span class="keyword">struct </span>app_pktq_tm_params *p = &amp;app-&gt;tm_params[i];</div>
<div class="line">        uint32_t n_readers = app_tm_get_readers(app, p);</div>
<div class="line">        uint32_t n_writers = app_tm_get_writers(app, p);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_readers != 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s has no reader\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_readers == 1),</div>
<div class="line">            <span class="stringliteral">&quot;%s has more than one reader\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_writers != 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s has no writer\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_writers == 1),</div>
<div class="line">            <span class="stringliteral">&quot;%s has more than one writer\n&quot;</span>, p-&gt;name);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">check_sources(<span class="keyword">struct</span> app_params *app)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; app-&gt;n_pktq_source; i++) {</div>
<div class="line">        <span class="keyword">struct </span>app_pktq_source_params *p = &amp;app-&gt;source_params[i];</div>
<div class="line">        uint32_t n_readers = app_source_get_readers(app, p);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_readers != 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s has no reader\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_readers == 1),</div>
<div class="line">            <span class="stringliteral">&quot;%s has more than one reader\n&quot;</span>, p-&gt;name);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">check_sinks(<span class="keyword">struct</span> app_params *app)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; app-&gt;n_pktq_sink; i++) {</div>
<div class="line">        <span class="keyword">struct </span>app_pktq_sink_params *p = &amp;app-&gt;sink_params[i];</div>
<div class="line">        uint32_t n_writers = app_sink_get_writers(app, p);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_writers != 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s has no writer\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((n_writers == 1),</div>
<div class="line">            <span class="stringliteral">&quot;%s has more than one writer\n&quot;</span>, p-&gt;name);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">check_msgqs(<span class="keyword">struct</span> app_params *app)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; app-&gt;n_msgq; i++) {</div>
<div class="line">        <span class="keyword">struct </span>app_msgq_params *p = &amp;app-&gt;msgq_params[i];</div>
<div class="line">        uint32_t n_readers = app_msgq_get_readers(app, p);</div>
<div class="line">        uint32_t n_writers = app_msgq_get_writers(app, p);</div>
<div class="line">        uint32_t msgq_req_pipeline, msgq_rsp_pipeline;</div>
<div class="line">        uint32_t msgq_req_core, msgq_rsp_core;</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;size &gt; 0),</div>
<div class="line">            <span class="stringliteral">&quot;%s size is 0\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        APP_CHECK((<a class="code" href="rte__common_8h.html#adf96e98b8f6bb0b22e8a8d3a0ac16e7d">rte_is_power_of_2</a>(p-&gt;size)),</div>
<div class="line">            <span class="stringliteral">&quot;%s size is not a power of 2\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">        msgq_req_pipeline = (strncmp(p-&gt;name, <span class="stringliteral">&quot;MSGQ-REQ-PIPELINE&quot;</span>,</div>
<div class="line">            strlen(<span class="stringliteral">&quot;MSGQ-REQ-PIPELINE&quot;</span>)) == 0);</div>
<div class="line"></div>
<div class="line">        msgq_rsp_pipeline = (strncmp(p-&gt;name, <span class="stringliteral">&quot;MSGQ-RSP-PIPELINE&quot;</span>,</div>
<div class="line">            strlen(<span class="stringliteral">&quot;MSGQ-RSP-PIPELINE&quot;</span>)) == 0);</div>
<div class="line"></div>
<div class="line">        msgq_req_core = (strncmp(p-&gt;name, <span class="stringliteral">&quot;MSGQ-REQ-CORE&quot;</span>,</div>
<div class="line">            strlen(<span class="stringliteral">&quot;MSGQ-REQ-CORE&quot;</span>)) == 0);</div>
<div class="line"></div>
<div class="line">        msgq_rsp_core = (strncmp(p-&gt;name, <span class="stringliteral">&quot;MSGQ-RSP-CORE&quot;</span>,</div>
<div class="line">            strlen(<span class="stringliteral">&quot;MSGQ-RSP-CORE&quot;</span>)) == 0);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ((msgq_req_pipeline == 0) &amp;&amp;</div>
<div class="line">            (msgq_rsp_pipeline == 0) &amp;&amp;</div>
<div class="line">            (msgq_req_core == 0) &amp;&amp;</div>
<div class="line">            (msgq_rsp_core == 0)) {</div>
<div class="line">            APP_CHECK((n_readers != 0),</div>
<div class="line">                <span class="stringliteral">&quot;%s has no reader\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">            APP_CHECK((n_readers == 1),</div>
<div class="line">                <span class="stringliteral">&quot;%s has more than one reader\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">            APP_CHECK((n_writers != 0),</div>
<div class="line">                <span class="stringliteral">&quot;%s has no writer\n&quot;</span>, p-&gt;name);</div>
<div class="line"></div>
<div class="line">            APP_CHECK((n_writers == 1),</div>
<div class="line">                <span class="stringliteral">&quot;%s has more than one writer\n&quot;</span>, p-&gt;name);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (msgq_req_pipeline) {</div>
<div class="line">            <span class="keyword">struct </span>app_pipeline_params *pipeline;</div>
<div class="line">            uint32_t pipeline_id;</div>
<div class="line"></div>
<div class="line">            APP_PARAM_GET_ID(p, <span class="stringliteral">&quot;MSGQ-REQ-PIPELINE&quot;</span>, pipeline_id);</div>
<div class="line"></div>
<div class="line">            APP_PARAM_FIND_BY_ID(app-&gt;pipeline_params,</div>
<div class="line">                <span class="stringliteral">&quot;PIPELINE&quot;</span>,</div>
<div class="line">                pipeline_id,</div>
<div class="line">                pipeline);</div>
<div class="line"></div>
<div class="line">            APP_CHECK((pipeline != NULL),</div>
<div class="line">                <span class="stringliteral">&quot;%s is not associated with a valid pipeline\n&quot;</span>,</div>
<div class="line">                p-&gt;name);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (msgq_rsp_pipeline) {</div>
<div class="line">            <span class="keyword">struct </span>app_pipeline_params *pipeline;</div>
<div class="line">            uint32_t pipeline_id;</div>
<div class="line"></div>
<div class="line">            APP_PARAM_GET_ID(p, <span class="stringliteral">&quot;MSGQ-RSP-PIPELINE&quot;</span>, pipeline_id);</div>
<div class="line"></div>
<div class="line">            APP_PARAM_FIND_BY_ID(app-&gt;pipeline_params,</div>
<div class="line">                <span class="stringliteral">&quot;PIPELINE&quot;</span>,</div>
<div class="line">                pipeline_id,</div>
<div class="line">                pipeline);</div>
<div class="line"></div>
<div class="line">            APP_CHECK((pipeline != NULL),</div>
<div class="line">                <span class="stringliteral">&quot;%s is not associated with a valid pipeline\n&quot;</span>,</div>
<div class="line">                p-&gt;name);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">check_pipelines(<span class="keyword">struct</span> app_params *app)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; app-&gt;n_pipelines; i++) {</div>
<div class="line">        <span class="keyword">struct </span>app_pipeline_params *p = &amp;app-&gt;pipeline_params[i];</div>
<div class="line"></div>
<div class="line">        APP_CHECK((p-&gt;n_msgq_in == p-&gt;n_msgq_out),</div>
<div class="line">            <span class="stringliteral">&quot;%s number of input MSGQs does not match &quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;the number of output MSGQs\n&quot;</span>, p-&gt;name);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">app_config_check(<span class="keyword">struct</span> app_params *app)</div>
<div class="line">{</div>
<div class="line">    check_mempools(app);</div>
<div class="line">    check_links(app);</div>
<div class="line">    check_rxqs(app);</div>
<div class="line">    check_txqs(app);</div>
<div class="line">    check_swqs(app);</div>
<div class="line">    check_tms(app);</div>
<div class="line">    check_sources(app);</div>
<div class="line">    check_sinks(app);</div>
<div class="line">    check_msgqs(app);</div>
<div class="line">    check_pipelines(app);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
